<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>OFAC SDN Risk & Concentration Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f6f8;
    }

    .header {
        display: flex;
        align-items: center;
        padding: 12px 18px;
        background: #3b82f6;
        color: white;
    }

    .menu-btn {
        background: transparent;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        margin-right: 15px;
        padding: 4px;
    }

    .menu-btn:hover {
        opacity: 0.7;
    }

    .top-right {
        margin-left: auto;
    }

    .btn {
        background: white;
        color: black;
        padding: 8px 14px;
        border-radius: 8px;
        font-size: 14px;
        cursor: pointer;
        border: none;
        transition: 0.3s;
    }

    /* LAYOUT */
    .container {
        display: flex;
        height: calc(100vh - 60px);
    }


    .sidebar {
        width: 220px;
        background: #ffffff;
        border-right: 1px solid #d1d9e6;
        box-shadow: 2px 0 6px rgba(0,0,0,0.08);
        transition: width 0.3s;
        overflow: hidden;
    }
    .sidebar.collapsed {
        width: 0px;
        border: none;
        box-shadow: none;
    }

    .menu-item {
        padding: 12px 16px;
        cursor: pointer;
        white-space: nowrap;
        transition: background 0.3s, transform 0.2s;
    }

    .menu-item:hover {
        background: #E8F9FF;
        transform: translateX(4px);
    }

   .content {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
    }
    .card {
        background: white;
        padding: 20px;
        border-radius: 14px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.12);
        max-width: 100%;
        transition: background 0.3s;
    }
    .card:hover {
        background: #E8F9FF;
    }
    .card img {
        width: 100%;
        max-height: 85vh;
        object-fit: contain;
        border-radius: 10px;
    }

    .footer {
        position: sticky;
        bottom: 0;
        text-align: center;
        padding: 10px 0 15px 0;
        font-size: 14px;
        color: #555;
        background: #f4f6f8;
        margin-top: auto;
    }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <button class="menu-btn" onclick="toggleSidebar()">☰</button>
    <h1>OFAC SDN Risk & Concentration Dashboard</h1>

    <div class="top-right">
        <button class="btn" onclick="loadDocumentation()">Documentation</button>
        <button class="btn" onclick="downloadExcel()">Download Excel</button>
    </div>
</div>

<!-- LAYOUT -->
<div class="container">
    
    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="menu-item" onclick="loadAbout()">Data Story</div>
        <div class="menu-item" onclick="loadImage('screenshot_Excel_OFAC_KPI_KRI.png')">OFAC KPI/KRI</div>
        <div class="menu-item" onclick="loadImage('Screenshot_Excel_OFAC_SDN_risk_logic.png')">OFAC SDN Risk Logic</div>
    </div>

    <!-- CONTENT -->
    <div class="content">
        <div class="card" id="display-card"></div>

       
    </div>
</div>
 <footer class="footer">© 2025 Atsu Vovor — All Rights Reserved</footer>
<script>
/* ---------------- DATA STORY ------------------- */
const data_story = `
<div>

<h2>Data Story: Sanctioned Entity Risk Profile</h2>

This analysis assesses the concentration risk of Specially Designated Nationals (SDNs) across five key countries by linking address data with entity types (Individual vs. Non-Individual) and applying a tiered risk rating based on the total number of distinct entities in each jurisdiction.<br><br>

The central insight is the extreme concentration of high risk in a single jurisdiction, <b>Mexico</b>, while the other four countries fall into low-to-medium risk categories.<br><br>

There is a strong concentration of <b>Individual</b> Specially Designated Nationals. Compliance efforts and risk exposure monitoring should be heavily weighted toward Individual entities. Any transactions or relationships linked to this SDN category warrant the highest level of scrutiny.<br><br>

<h3>Key Business Insights</h3>

<b>1. Extreme Concentration of Critical Risk</b><br>
Mexico is the only country assigned a <b>Critical</b> risk rating. With <b>1,018</b> distinct sanctioned entities, its count is nearly five times higher than the next highest country (North Korea, at 229).<br>
<b>Actionable Insight:</b> Compliance efforts and monitoring should be heavily weighted toward Mexico. Any transactions or relationships linked to this jurisdiction require the highest level of scrutiny.<br><br>

<b>2. Primary Risk Drivers: Individuals vs. Non-Individuals</b><br>
While the overall risk rating is based on total count, the breakdown reveals the primary nature of the risk:<br><br>

• <b>Mexico</b> has a high volume of both Individuals (573) and Non-Individuals (445), suggesting a broad systemic presence of sanctioned activity involving both personal networks and corporate/organizational fronts.<br>
• <b>North Korea</b> risk is driven primarily by Non-Individuals (166 vs. 63 Individuals), indicating activity centered on state-run enterprises, vessels, or shell companies linked to evasion or proliferation networks.<br>
• <b>Lebanon</b> has a balanced mix (152 Individuals vs. 173 Non-Individuals), indicating dual risk composed of personal facilitators supported by organizational infrastructure.<br><br>

<b>3. Medium-Low Risk Jurisdictions</b><br>
North Korea (229) and Lebanon (325) fall into the <b>Medium-Low</b> risk rating. Though lower than Mexico, their volumes are still significant.<br>
<b>Insight:</b> These jurisdictions represent moderate risk profiles. Due diligence should prioritize identifying and mitigating Non-Individual entities in North Korea, and both entity types in Lebanon.<br><br>

<b>4. Low Risk Jurisdictions (Lower Volume, Not Zero Risk)</b><br>
Spain (48) and Afghanistan (82) are classified as <b>Low</b> risk.<br>
<b>Insight:</b> Low rating is quantitative, not qualitative. Even a few dozen sanctioned entities pose meaningful exposure. Compliance checks should remain rigorous but with proportional allocation of resources.<br><br>

</div>
`;

/* ---------------- IMAGE LOADER ------------------- */
function loadImage(filename) {
    const url = "https://raw.githubusercontent.com/atsuvovor/projects_portfolio.github.io/main/" + filename;
    document.getElementById("display-card").innerHTML = `<img src="${url}">`;
}

/* ---------------- ABOUT LOADER ------------------- */
function loadAbout() {
    document.getElementById("display-card").innerHTML = data_story;
}


/* ---------------- SIDEBAR TOGGLE ------------------- */
function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("collapsed");
}

/* ---------------- FIXED EXCEL DOWNLOAD ------------------- */
async function downloadExcel() {
    const url =
      "https://raw.githubusercontent.com/atsuvovor/MS_Excel_Power_Pivot_Power_Query_Projects/main/docs/Excel_OFAC_sanctions/OFAC_Sanctions_Analytics.xlsx";

    try {
        const response = await fetch(url);
        if (!response.ok) throw new Error("Network response was not ok");

        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);

        const a = document.createElement("a");
        a.href = blobUrl;
        a.download = "OFAC_Sanctions_Analytics.xlsx";
        document.body.appendChild(a);
        a.click();

        window.URL.revokeObjectURL(blobUrl);
        document.body.removeChild(a);
    } catch (error) {
        console.error("Download failed:", error);
        alert("File download failed. Please try again.");
    }
}

/* ---------------- LOAD DOCUMENTATION ------------------- */
async function loadDocumentation() {
    const url = "https://raw.githubusercontent.com/atsuvovor/MS_Excel_Power_Pivot_Power_Query_Projects/refs/heads/main/docs/Excel_OFAC_sanctions/README.md";

    try {
        let mdText = await (await fetch(url)).text();

        const base = "https://raw.githubusercontent.com/atsuvovor/MS_Excel_Power_Pivot_Power_Query_Projects/refs/heads/main/docs/Excel_OFAC_sanctions/";

        mdText = mdText.replace(/!\[(.*?)\]\((images\/.*?)\)/g, (m, alt, rel) => {
            return `![${alt}](${base}${rel})`;
        });

        mdText = mdText.replace(
            /<img\s+([^>]*?)src=["']([^"']+)["']([^>]*)>/gi,
            (match, pre, src, post) => {
                if (src.startsWith("http")) return match;
                const newPath = base + src;
                post = post.replace(/width=["']\d+["']/gi, "")
                           .replace(/height=["']\d+["']/gi, "");
                if (!/style=/i.test(post)) {
                    post += ' style="max-width:100%;height:auto;"';
                }
                return `<img ${pre}src="${newPath}"${post}>`;
            }
        );

        const html = marked.parse(mdText);

        document.getElementById("display-card").innerHTML = `
            <div style="padding:10px; max-width:1000px; margin:auto;">
                ${html}
            </div>
        `;

    } catch (err) {
        alert("Documentation could not be loaded. Ensure README.md exists.");
        console.error(err);
    }
}



/* ---------------- LOAD ABOUT BY DEFAULT ------------------- */
window.onload = loadAbout;
</script>

</body>
</html>









